"use strict";(self["webpackChunkfacility_app"]=self["webpackChunkfacility_app"]||[]).push([[717],{2888:function(e,t,n){n.d(t,{Gw:function(){return i},Xi:function(){return l},bF:function(){return a},fc:function(){return c}});n(7658);function a(e,t,n){const a=new Date(t),l=new Date(n),i=[],c=new Date(a);while(c<=l){const t=c.toISOString().split("T")[0];e.includes(t)||i.push(t),c.setDate(c.getDate()+1)}return i}function l(e,t){function n(e){const[t,n]=e.split(":").map((e=>Number(e)));return 60*t+n}let a=n(e),l=n(t);return a-l}function i(e){const t=new Date(e),n=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),o=`${n}-${a}-${l} ${i}:${c}:${s}`;return o}function c(e){var t=e.replace("T"," ");return t}},3737:function(){},2983:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae}});var a=n(356),l=(n(4332),n(2473)),i=n(9812),c=n(1882),s=n(2469),o=n(8586);const[r,u]=(0,c["do"])("steps"),d={active:(0,s.SI)(0),direction:(0,s.SQ)("horizontal"),activeIcon:(0,s.SQ)("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},f=Symbol(r);var v=(0,i.aZ)({name:r,props:d,emits:["clickStep"],setup(e,{emit:t,slots:n}){const{linkChildren:a}=(0,o.$E)(f),l=e=>t("clickStep",e);return a({props:e,onClickStep:l}),()=>{var t;return(0,i.Wm)("div",{class:u([e.direction])},[(0,i.Wm)("div",{class:u("items")},[null==(t=n.default)?void 0:t.call(n)])])}}});const w=(0,l.n)(v);n(1958);var p=n(8336),m=n(4874);const[k,g]=(0,c["do"])("step");var _=(0,i.aZ)({name:k,setup(e,{slots:t}){const{parent:n,index:a}=(0,o.NB)(f);if(!n)return void 0;const l=n.props,c=()=>{const e=+l.active;return a.value<e?"finish":a.value===e?"process":"waiting"},s=()=>"process"===c(),r=(0,i.Fl)((()=>({background:"finish"===c()?l.activeColor:l.inactiveColor}))),u=(0,i.Fl)((()=>s()?{color:l.activeColor}:"waiting"===c()?{color:l.inactiveColor}:void 0)),d=()=>n.onClickStep(a.value),v=()=>{const{iconPrefix:e,finishIcon:n,activeIcon:a,activeColor:o,inactiveIcon:u}=l;return s()?t["active-icon"]?t["active-icon"]():(0,i.Wm)(m.JO,{class:g("icon","active"),name:a,color:o,classPrefix:e},null):"finish"===c()&&(n||t["finish-icon"])?t["finish-icon"]?t["finish-icon"]():(0,i.Wm)(m.JO,{class:g("icon","finish"),name:n,color:o,classPrefix:e},null):t["inactive-icon"]?t["inactive-icon"]():u?(0,i.Wm)(m.JO,{class:g("icon"),name:u,classPrefix:e},null):(0,i.Wm)("i",{class:g("circle"),style:r.value},null)};return()=>{var e;const n=c();return(0,i.Wm)("div",{class:[p.T5,g([l.direction,{[n]:n}])]},[(0,i.Wm)("div",{class:g("title",{active:s()}),style:u.value,onClick:d},[null==(e=t.default)?void 0:e.call(t)]),(0,i.Wm)("div",{class:g("circle-container"),onClick:d},[v()]),(0,i.Wm)("div",{class:g("line"),style:r.value},null)])}}});const h=(0,l.n)(_);n(368),n(6742);var S=n(3749),U=(n(2480),n(7468)),y=(n(2304),n(5073)),W=(n(7038),n(5881)),b=(n(7370),n(521)),C=n(5893),D=n(644),z=n(5041),T=n(704),I=n(9226),q=n(2888);const x=e=>((0,i.dD)("data-v-69fc4f53"),e=e(),(0,i.Cn)(),e),$={class:"recordDetail"},J={key:0,class:"top_status"},j=x((()=>(0,i._)("div",null,"预约最终状态",-1))),H={style:{color:"red"}},P={key:0,class:"card_center"},F={class:"steps"},L={key:0},O=x((()=>(0,i._)("h3",null,"提交预约设施申请",-1))),N={key:1},R=x((()=>(0,i._)("h3",null,"用户取消预约设施",-1))),X={key:2},Z=x((()=>(0,i._)("h3",null,"管理员同意预约请求",-1))),E={key:3},M=x((()=>(0,i._)("h3",null,"管理员不同意预约请求",-1))),Q={key:4},Y=x((()=>(0,i._)("h3",null,"用户取消预约设施",-1))),A={key:5},B=x((()=>(0,i._)("h3",null,"签到使用",-1))),G={key:6},K=x((()=>(0,i._)("h3",null,"未签到",-1))),V={style:{width:"96vw",margin:"20px auto",right:"0",left:"0"}};var ee={__name:"RecordDetail",setup(e){let t=(0,D.tv)(),n=t.currentRoute.value.query.reservationId,l=(0,b.iH)(),c=(0,b.iH)(),s=(0,b.iH)({number:0,text:""});function o(){(0,z.y$)(l.value.roomIdSeatId).then((e=>{c.value=e.data.seatNumber}))}(0,z.Ry)(n).then((e=>{console.log("recordDetail",e.data),l.value=e.data,"room_facility_code"==l.value.reservationType&&o()}));let r=(0,b.iH)([]);function u(){(0,T.WD)({title:"提示",message:"确定取消该条预约申请吗？",theme:"round-button"}).then((()=>{console.log("取消预约id",n,l.value.reservationDetailId,r.value.length),(0,z.rJ)(n,l.value.reservationDetailId,r.value.length).then((e=>{console.log(1==e.data,e.data),!0===e.data?(0,T.vC)({message:"取消预约申请成功！",theme:"round-button"}).then((()=>{d()})):(0,I.LJ)("请重试！")})).catch((e=>{(0,I.LJ)("请稍后重试！")}))})).catch((()=>{}))}function d(e){t.back()}return(0,z.sP)(n).then((e=>{console.log(e.data),r.value=e.data,e.data.length>0&&e.data.forEach(((e,t)=>{switch(e.handlerCode){case 101:s.value.number=1;break;case 102:s.value.number=2;break;case 103:s.value.number=1;break;case 104:s.value.number=2;break;case 105:s.value.number=2;break;case 106:s.value.number=2;break;case 107:s.value.number=2;break}})),console.log(s.value)})).catch((e=>{r.value=[]})),(e,t)=>{const n=W.l2,o=y.Le,f=U.JX,v=S.X2,p=h,m=w,k=a.zx;return(0,i.wg)(),(0,i.iD)("div",$,[(0,i.Wm)(o,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{title:"预约历史详情","left-text":"返回","left-arrow":"",onClickLeft:d})])),_:1}),null!=(0,b.SU)(l)?((0,i.wg)(),(0,i.iD)("div",J,[j,(0,i._)("div",H,(0,C.zw)((0,b.SU)(l).status),1)])):(0,i.kq)("",!0),(0,i._)("div",null,[null!=(0,b.SU)(l)?((0,i.wg)(),(0,i.iD)("div",P,[(0,i.Wm)(v,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约编号")])),_:1}),(0,i.Wm)(f,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(l).reservationId),1)])),_:1})])),_:1}),(0,i.Wm)(v,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("设施地点名称")])),_:1}),(0,i.Wm)(f,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)("博瑞A楼-402-自习室")])),_:1})])),_:1}),(0,i.Wm)(v,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("申请时间")])),_:1}),(0,i.Wm)(f,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(q.fc)((0,b.SU)(l).applicationTime)),1)])),_:1})])),_:1}),(0,i.Wm)(v,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约日期")])),_:1}),(0,i.Wm)(f,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(l).reservationDate),1)])),_:1})])),_:1}),(0,i.Wm)(v,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约时段")])),_:1}),(0,i.Wm)(f,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(l).startTime)+" -"+(0,C.zw)((0,b.SU)(l).endTime),1)])),_:1})])),_:1}),(0,i.Wm)(v,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约方式")])),_:1}),"room"==(0,b.SU)(l).reservationType?((0,i.wg)(),(0,i.j4)(f,{key:0,span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)("整体")])),_:1})):((0,i.wg)(),(0,i.j4)(f,{key:1,span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)("编号")])),_:1}))])),_:1}),"room_facility_code"==(0,b.SU)(l).reservationType?((0,i.wg)(),(0,i.j4)(v,{key:0,class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约编号")])),_:1}),(0,i.Wm)(f,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(c)),1)])),_:1})])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),(0,i._)("div",F,[(0,i.Wm)(m,{direction:"vertical",active:(0,b.SU)(r).length-1>=0?(0,b.SU)(r).length-1:0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,b.SU)(r),(t=>((0,i.wg)(),(0,i.j4)(p,{key:e.index},{default:(0,i.w5)((()=>[101==t.handlerCode?((0,i.wg)(),(0,i.iD)("div",L,[O,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(t.processingTime)),1)])):(0,i.kq)("",!0),102==t.handlerCode?((0,i.wg)(),(0,i.iD)("div",N,[R,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(t.processingTime)),1)])):(0,i.kq)("",!0),103==t.handlerCode?((0,i.wg)(),(0,i.iD)("div",X,[Z,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(t.processingTime)),1)])):(0,i.kq)("",!0),104==t.handlerCode?((0,i.wg)(),(0,i.iD)("div",E,[M,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(t.processingTime)),1)])):(0,i.kq)("",!0),105==t.handlerCode?((0,i.wg)(),(0,i.iD)("div",Q,[Y,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(t.processingTime)),1)])):(0,i.kq)("",!0),106==t.handlerCode?((0,i.wg)(),(0,i.iD)("div",A,[B,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(t.processingTime)),1)])):(0,i.kq)("",!0),107==t.handlerCode?((0,i.wg)(),(0,i.iD)("div",G,[K,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(t.processingTime)),1)])):(0,i.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["active"])]),(0,i._)("div",V,[2==(0,b.SU)(s).number?((0,i.wg)(),(0,i.j4)(k,{key:0,round:"",type:"success",color:"#fedd02",block:"",onClick:t[0]||(t[0]=e=>d())},{default:(0,i.w5)((()=>[(0,i.Uk)("返回")])),_:1})):(0,i.kq)("",!0),1==(0,b.SU)(s).number?((0,i.wg)(),(0,i.j4)(k,{key:1,round:"",type:"success",color:"red",block:"",onClick:t[1]||(t[1]=e=>u())},{default:(0,i.w5)((()=>[(0,i.Uk)("取消预约")])),_:1})):(0,i.kq)("",!0)])])}}},te=n(8998);const ne=(0,te.Z)(ee,[["__scopeId","data-v-69fc4f53"]]);var ae=ne},4332:function(e,t,n){n(1958),n(368),n(6742),n(2939),n(1452)},2304:function(e,t,n){n(1958),n(3737)},2480:function(e,t,n){n(1958),n(3737)}}]);
//# sourceMappingURL=recordDetail.3b77ec6a.js.map